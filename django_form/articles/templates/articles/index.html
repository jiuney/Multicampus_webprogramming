{% extends 'base.html' %}

{% block body %}
    <h1>Articles</h1>
    {% if user.is_authenticated %}
    <a href="{% url 'articles:create' %}">[NEW]</a>
    {% else %}
    <a href="{% url 'accounts:login' %}">[새 글을 작성하려면 로그인을 해주세요!]</a>
    {% endif %}
    
    {% for article in articles %}
        <p><strong>작성자: {{ article.user }}</strong></p>
        <P>{{ article.pk }}</P>
        <P>{{ article.title }}</P>
        <a href="{% url 'articles:like' article.pk %}">
            {% if user in article.like_users.all %}
                <i class="fas fa-heart" style="color: red"></i>
            {% else %}
                <i class="far fa-heart" style="color: cadetblue"></i>
            {% endif %}
        </a>
        {{ article.like_users.all|length }}명이 이 글을 좋아합니다.<br>
        <a href="{% url 'articles:detail' article.pk %}">[DETAIL]</a>
        <hr>
    {% endfor %}
{% endblock %}